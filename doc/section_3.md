## Android 音视频开发

### 音视频开发的学习之路

- [语言](#语言)
- [框架](#框架)

#### 语言

- C/C++: 音视频开发经常需要跟底层代码打交道，掌握 C/C++ 是必须的技能
- ARM NEON 汇编：这是一项进阶技能，在视频编解码、各种帧处理低下时很多都是利用 NEON 汇编加速，例如 FFmpeg/libyuv 底层都大量利用了 NEON 汇编来加速处理过程。虽说它不是必备技能，但有兴趣也可以多多了解，具体资料可以参考 ARM 社区的教程。

#### 框架

- [FFmpeg](#FFmpeg)
- [libyuv](#libyuv)
- [libx264/libx265](#libx264/libx265)
- [OpenGL ES](#OpenGL ES)
- [Vulkan](#Vulkan)
- [ExoPlayer/ijkplayer](#ExoPlayer/ijkplayer)

##### FFmpeg

可以说是业界最出名的音视频处理框架了，几乎囊括音视频开发的所有流程，可以说是必备技能。

##### libyuv

Google 开源的 YUV 帧处理库，因为摄像头输出、编解码输入输出也是基于 YUV 格式，所以也经常需要这个库来操作数据（FFmpeg 也有提供了这个库里面所有的功能，在libswscale都可以找到类似的实现。不过这个库性能更好，也是基于 NEON 汇编加速）。

##### libx264/libx265

目前业界最为广泛使用的 H.264/H.265 软编解码库。移动平台上虽然可以使用硬编码，但很多时候出于兼容性或画质的考虑，因为不少低端的 Android 机器，在低码率的场景下还是软编码的画质会更好，最终可能还是得考虑使用软编解码。

##### OpenGL ES

当今，大部分视频特效、美颜算法的处理，最终渲染都是基于 GLES 来实现的，因此想要深入音视频的开发，GLES 是必备的知识。另外，除了 GLES 以外，Vulkan也是近几年开始发展起来的一个更高性能的图形 API，但目前来看，使用还不是特别广泛。

##### Vulkan

也是近几年开始发展起来的一个更高性能的图形 API，但目前来看，使用还不是特别广泛。

##### ExoPlayer/ijkplayer

一个完整的视频类 App 肯定会涉及视频播放的体验，这两个库可以说是当下业界最为常用的视频播放器了，支持众多格式、协议，如果你想要深入学习视频播放处理，它们几乎也算是必备技能。

### 两条路径深入学习

- 视频相关特效开发
- 视频编码压缩算法

#### 视频相关特效开发

直播、小视频相关 App 目前越来越多，几乎每个 App 相关的特效，往往都是利用 OpenGL 本身来实现。对于一些简单的特效，可以使用类似Color Look Up Table的技术，通过修改素材配合 Shader 来查找颜色替换就能实现。如果要继续学习更加复杂的滤镜，推荐你可以去shadertoy学习参考，上面有非常多 Shader 的例子。而美颜、美型相关的效果，特别是美型，需要利用人脸识别获取到关键点，对人脸纹理进行三角划分，然后再通过 Shader 中放大、偏移对应关键点纹理坐标来实现。如果想要深入视频特效类的开发，我推荐可以多学习 OpenGL 相关的知识，这里会涉及很多优化点。

#### 视频编码压缩算法

H.264/H.265 都是非常成熟的视频编码标准，如何利用这些视频编码标准，在保证视频质量的前提下，将视频大小最小化，从而节省带宽，这就需要对视频编码标准本身要有非常深刻的理解。这可能是一个门槛相对较高的方向，我也尚处学习阶段，有兴趣的同学可以阅读相关编码标准的文档。
